/*! jQuery userTimeout - v0.3.0 - 2017-06-19
* https://github.com/lleblanc42/jquery-userTimeout
* Copyright (c) 2017 Luke LeBlanc; Licensed GPL-3.0 */
!function(a,b,c,d){"use strict";a.fn.userTimeout=function(d){var e,f,g,h,i,j,k,l,m={logouturl:null,referer:!1,refererName:"refer",notify:!0,timer:!0,session:6e5,force:3e5,ui:"auto",debug:!1,modalTitle:"Session Timeout",modalBody:"You're being timed out due to inactivity. Please choose to stay signed in or to logoff. Otherwise, you will logged off automatically."},n=a.extend(m,d||{}),o=function(){return n.logouturl?void(r(n.ui)!==!1&&p()):void(n.debug===!0?c.alert("Please configure the userTimeout plugin!"):c.console.error("Please configure the userTimeout plugin!"))},p=function(c){switch(clearTimeout(e),clearTimeout(f),clearTimeout(g),h=(new Date).getTime(),i=0,j=0,c){case"logout":g=Math.floor(n.force/1e3%60),a("#countdowntimer").html(g),f=setTimeout(q(c),100);break;default:e=setTimeout(q(c),100)}a(b).on("focus click mousemove mousedown keyup scroll keypress",function(){p(c)})},q=function(b){switch(i+=100,k=(new Date).getTime()-h-i,b){case"logout":i===n.force?(clearTimeout(f),clearTimeout(g),t()):(j+=100,1e3===j&&(g-=1,a("#countdowntimer").html(g),j=0),f=setTimeout(q(b),100-k));break;default:i===n.session?(clearTimeout(e),n.notify===!0?s():t()):e=setTimeout(q(b),100-k)}},r=function(b){switch(b){case"auto":if("function"==typeof a().emulateTransitionEnd)l="bootstrap";else{if("undefined"==typeof jQuery.ui)return n.debug===!0?c.alert("Twitter Bootstrap 3 nor jQueryUI was not found! Please load the proper libraries and their themes to utilize this plugin!"):c.console.error("Twitter Bootstrap 3 nor jQueryUI was not found! Please load the proper libraries and their themes to utilize this plugin!"),!1;l="jqueryui"}break;case"bootstrap":if("function"!=typeof a().emulateTransitionEnd)return n.debug===!0?c.alert("Twitter Bootstrap 3 was not found! Please load the proper libraries and their themes to utilize this plugin!"):c.console.error("Twitter Bootstrap 3 was not found! Please load the proper libraries and their themes to utilize this plugin!"),!1;l="bootstrap";break;case"jqueryui":if("undefined"==typeof jQuery.ui)return n.debug===!0?c.alert("jQueryUI was not found! Please load the proper libraries and their themes to utilize this plugin!"):c.console.error("jQueryUI was not found! Please load the proper libraries and their themes to utilize this plugin!"),!1;l="jqueryui";break;default:return n.debug===!0?c.alert("Twitter Bootstrap 3 nor jQueryUI was not found! Please load the proper libraries and their themes to utilize this plugin!"):c.console.error("Twitter Bootstrap 3 nor jQueryUI was not found! Please load the proper libraries and their themes to utilize this plugin!"),!1}return!0},s=function(){if(p("logout"),"bootstrap"===l){var b,c,d,e,f,h,i;b=a('<div class="modal fade" id="notifyLogout" tabindex="-1" role="dialog" aria-labelledby="notifyLogoutLabel" aria-hidden="true"></div>'),c=a('<div class="modal-dialog"></div>'),d=a('<div class="modal-content"></div>'),e=a('<div class="modal-header"><button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button><h4 class="modal-title" id="notifyLogoutLabel">'+n.modalTitle+"</h4></div>"),f=a('<div class="modal-body">'+n.modalBody+"</div>"),h=a(n.timer===!0?'<div class="modal-footer"><button type="button" class="btn btn-primary" data-dismiss="modal">Stay Logged In (<span id="countdowntimer">'+g+"</span>)</button></div>":'<div class="modal-footer"><button type="button" class="btn btn-primary" data-dismiss="modal">Stay Logged In</button></div>'),i=a('<button type="button" class="btn btn-default" id="logoff">Log Off</button>'),d.append(e,f,h),h.prepend(i),c.append(d),b.append(c),a(b).modal({backdrop:"static",keyboard:!1,show:!0}),a(b).on("hide.bs.modal",function(){p(),a(b).remove()}),a(i).on("click",function(){t()})}else if("jqueryui"===l){var j,k={},m='<div id="notifyLogout"><p>'+n.modalBody+"</p></div>";k["Stay Logged In"]=function(){p(),j.dialog("close")},k["Log Off"]=function(){t()},j=a(m).dialog({buttons:k,modal:!0,width:600,height:300,resizable:!1,title:n.modalTitle})}},t=function(){var b;if(clearTimeout(e),clearTimeout(f),clearTimeout(g),n.referer!==!1)if("auto"===n.referer){var d=a(location).attr("href");b=n.logouturl+"?"+encodeURIComponent(n.refererName)+"="+encodeURIComponent(d)}else b=n.logouturl+"?"+encodeURIComponent(n.refererName)+"="+encodeURIComponent(n.referer);else b=n.logouturl;return c.location=b};return this.each(function(){o()})}}(jQuery,document,window);